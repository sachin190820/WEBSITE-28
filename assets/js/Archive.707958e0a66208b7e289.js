(self.webpackChunkplato=self.webpackChunkplato||[]).push([[57],{6162:(t,e,i)=>{var s=i(5779);t.exports=function(t){"use strict";t=t||{};var e="",a=s.$each,n=t.data,o=(t.project,t.key,t.photo,t.photokey,s.$escape),r=(t.image,function(t){return e+=t});t.sizes,t.widthIncrement,t.maxWidth,t.width;return e+='<section class="page-wrapper" id="archive">\n  <div class="archive__grid">\n    ',a(n.projects,(function(t,s){e+="\n    ",a(t.photos,(function(a,n){e+='\n      <div class="archive__item" data-id="',e+=o(s),e+=o(n),e+='">\n        <p>[',e+=o(n),e+="]</p>\n        ";var h=a.photo;e+="\n        ",r(i(4249)({image:h,sizes:"(min-width: 960px) 7vw, 70px",widthIncrement:70,maxWidth:400,width:"140"})),e+='\n        <div class="archive__itemDetail">\n          <h2>',e+=o(t.title),e+="</h2>\n          <h3>",e+=o(t.type),e+="</h3>\n          <h3>",e+=o(t.year),e+="</h3>\n        </div>\n      </div>\n    "})),e+="\n    "})),e+='\n  </div>\n  <div class="archive__zoom">\n    <span class="archive__zoomOverlay"></span>\n    ',a(n.projects,(function(t,s){e+="\n    ",a(t.photos,(function(t,a){e+='\n      <div class="archive__zoomItem" data-id="',e+=o(s),e+=o(a),e+='">\n        ';var n=t.photo;e+="\n        ",r(i(4249)({image:n,sizes:"auto",widthIncrement:200,maxWidth:n.dimensions.width,width:"600"})),e+="\n      </div>\n    "})),e+="\n    "})),e+="\n  </div>\n</section>\n"}},4249:(t,e,i)=>{var s=i(5779);t.exports=function(t){"use strict";var e,a="",n=(t=t||{}).image,o=s.$escape,r=t.sizes,h=t.widthIncrement,d=t.maxWidth,c=t.quality,l=t.title,m=t.width;return n&&(a+='\n<div\n  class="responsive-image"\n  style="\n    --aspect-ratio: ',a+=o(n.roundedAspectRatio),a+=";\n    ",n.color&&(a+="--bg-color:",a+=o(n.color),a+=";"),a+='\n  "\n> \n  <img class="lazy" data-src="',a+=o(n.url),a+='" data-sizes="',a+=o(r||"100vw"),a+='"\n    data-srcset="',e=i(7230)({image:n,widthIncrement:h,maxWidth:d,quality:c}),a+=e,a+='"\n    data-width="',a+=o(n.dimensions.width),a+='" data-height="',a+=o(n.dimensions.height),a+='"\n    alt="',a+=o(n.alt||l),a+='"\n    decoding="async"\n    ',m&&(a+='width="',a+=o(m),a+='px"'),a+="\n    ",m&&(a+='height="',a+=o(m*n.roundedAspectRatio),a+='px"'),a+='\n  >\n  <noscript><img alt="',a+=o(n.alt||l),a+='" src="',a+=o(n.url),a+='" /></noscript>\n</div>\n'),a+="\n"}},7230:(t,e,i)=>{var s=i(5779);t.exports=function(t){"use strict";var e="",i=(t=t||{}).widthIncrement,a=t.quality,n=t.maxWidthValue,o=t.maxWidth,r=t.image,h=t.iterationIndex,d=t.i,c=s.$escape;i=i||200;e+="\n";a=a||100;e+="\n\n";n=o||r.dimensions.width;if(e+="\n",r.dimensions.width>=o){e+="\n  ";n=o;e+="\n"}else{e+="\n  ";n=r.dimensions.width;e+="\n"}e+="\n\n";h=n/i;e+="\n\n";for(d=1;d<=h;d++)e+="\n",i*d<=n-i/2&&(e+="\n  ",e+=c(r.url),e+="?w=",e+=c(i*d),e+="&fit=max&auto=format&q=",e+=c(a),e+=" ",e+=c(i*d),e+="w,\n"),e+="\n";return e+="\n",e+=c(r.url),e+="?w=",e+=c(n),e+="&fit=max&auto=format&q=",e+=c(a),e+=" ",e+=c(n),e+="w,\n"}},3052:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});i(8674);var s=i(363),a=i(6748),n=i(1636),o=i(7922),r=i(334),h=i(2188);class d extends s.Z{constructor(t){super(t),this.type=t.type||"default",this.data=t.data?t.data:{},this.promises={data:{resolve:null,reject:null}},this.sequences={}}initComponent(){this.getData().then((()=>{this.initData(),super.initComponent()}))}getData(){return new Promise(((t,e)=>{this.promises.data.resolve=t,this.promises.data.reject=e,this.fetchData()}))}initData(){this.data.meta&&a.Z.dispatch((0,h.US)(this.data.meta)),this.props.data=this.data}fetchData(){if(!this.props.endPoint)return void this.promises.data.resolve();const{oldPage:t,location:e}=a.Z.getState().app,i=(0,o.B)(e);if(t){const t=n.e+this.props.endPoint,e=r.Z.has(i.id)?r.Z.getData(i.id):null;e?Promise.resolve(e)==e?e.then((()=>{this.setData(r.Z.getData(i.id))})):this.setData(e):fetch(t).then((t=>t.json())).then((t=>{this.setData(t),r.Z.set(i.id,t)})).catch((()=>{this.promises.data.reject()}))}else{const{globalData:t}=a.Z.getState().app;t&&t.serverData?(this.setData(t.serverData),r.Z.set(i.id,t.serverData)):this.promises.data.reject()}}setData(t){this.data=t,this.promises.data.resolve()}setupDOM(){this.el.style.opacity=0}onDOMInit(){const{oldPage:t}=a.Z.getState().app;t&&(this.el.classList.add("next-page"),document.getElementById("content").querySelector(".page__container").appendChild(this.el)),super.onDOMInit()}showComponent(){var t=this;setTimeout((async function(){t.el.style.opacity=1,t.onShown()}),0)}hideComponent(){var t=this;setTimeout((async function(){t.el.style.opacity=0,t.onHidden()}),0)}}const c=d},7193:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>h});var s=i(4942),a=(i(6992),i(3948),i(8674),i(3052)),n=i(6162),o=(i(6748),i(9630));class r extends a.Z{constructor(t){super(t),(0,s.Z)(this,"handleItemClick",(t=>{const e=t.currentTarget.dataset.id;this.setState({activeArchiveItemId:e})})),(0,s.Z)(this,"handleZoomItemClick",(t=>{const e=t.currentTarget.querySelector(".responsive-image"),i=t.clientX,s=e.getBoundingClientRect(),a=i>=s.x+s.width/2?"next":"prev",n=this.$gridItems.find((e=>e.dataset.id===t.currentTarget.dataset.id)),o=this.$gridItems.indexOf(n),r=this.mod("next"===a?o+1:o-1,this.$gridItems.length),h=this.$gridItems[r].dataset.id;this.setState({activeArchiveItemId:h})})),(0,s.Z)(this,"handleZoomContainerClick",(()=>{this.setState({activeArchiveItemId:null})})),(0,s.Z)(this,"handleKeyDown",(t=>{"Escape"!==t.key||this.state.isAnimating||(t.preventDefault(),this.handleZoomContainerClick())})),(0,s.Z)(this,"mod",((t,e)=>(t%e+e)%e)),this.template=n,this.state={activeArchiveItemId:null,firstTimeOpening:!0},this.storeEvents={"header.isInformationPanelVisible":(t,e)=>this.onIsInformationPanelVisibleUpdate(t,e)}}initDOM(){this.$gridItems=[...this.el.querySelectorAll(".archive__item")],this.$images=[...this.el.querySelectorAll(".archive__grid .responsive-image img")],this.$zoomContainer=this.el.querySelector(".archive__zoom"),this.$overlay=this.el.querySelector(".archive__zoomOverlay"),this.$zoomItems=[...this.el.querySelectorAll(".archive__zoomItem")],this.randomizeDOM(),this.portal(),this.$gridItems=[...this.el.querySelectorAll(".archive__item")]}portal(){this.$zoomContainer.remove(),document.querySelector(".archive__portal").appendChild(this.$zoomContainer)}bindEvents(){this.$gridItems.forEach((t=>{t.addEventListener("click",this.handleItemClick)})),this.$zoomItems.forEach((t=>{t.addEventListener("click",this.handleZoomItemClick)})),this.$overlay.addEventListener("click",this.handleZoomContainerClick),document.addEventListener("keydown",this.handleKeyDown,!1)}unbindEvents(){document.removeEventListener("keydown",this.handleKeyDown,!1)}onDOMInit(){super.onDOMInit(),this.$images.forEach((t=>{(0,o.po)(t)})),this.animShowInfo=this.$zoomContainer.animate({transform:"translate3d(0px,var(--information-height),0px)"},{duration:800,easing:"cubic-bezier(0.65, 0, 0.35, 1)",fill:"forwards"}),this.animShowInfo.pause()}stateDidUpdate(t,e){t.activeArchiveItemId!==e.activeArchiveItemId&&(t.activeArchiveItemId?(this.displayZoomItem(t.activeArchiveItemId),this.updateGridItem(t.activeArchiveItemId)):(this.hideZoomItem(),this.updateGridItem()))}updateGridItem(t=""){this.$gridItems.forEach((e=>{if(e.dataset.id===t){e.classList.add("is-active");const t=e.getBoundingClientRect(),i=window.scrollY,s=t.y+i-180;window.scrollTo({top:s,left:0,behavior:"smooth"})}else e.classList.remove("is-active")}))}displayZoomItem(t){this.$zoomContainer.style.display="block",this.$zoomItems.forEach((e=>{if(e.dataset.id===t){e.style.opacity="1";e.querySelector(".responsive-image").style.pointerEvents="auto";const i=e.querySelector("img");this.state.firstTimeOpening&&(this.setState({firstTimeOpening:!1}),(0,o.po)(i).then((()=>{this.$zoomItems.forEach((e=>{if(e.dataset.id!==t){const t=e.querySelector("img");(0,o.po)(t)}}))})))}else{e.style.opacity="0";e.querySelector(".responsive-image").style.pointerEvents="none"}}))}hideZoomItem(){this.$zoomContainer.style.display="none"}shuffleArray(t){for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t}randomizeDOM(){const t=this.el.querySelector(".archive__grid"),e=Array.from(t.children),i=this.shuffleArray(e);t.innerHTML="";let s=0;i.forEach((e=>{s++;let i=s;s<10&&(i=`0${s}`),e.querySelector("p").innerHTML=`[${i}]`,t.appendChild(e)}))}async onIsInformationPanelVisibleUpdate(t){t?(this.animShowInfo.playbackRate=1,this.animShowInfo.play()):(this.animShowInfo.playbackRate=-1,this.animShowInfo.play())}dispose(){this.$zoomContainer.remove(),super.dispose()}}const h=r}}]);