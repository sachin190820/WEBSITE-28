(self.webpackChunkplato=self.webpackChunkplato||[]).push([[962],{4249:(t,e,i)=>{var s=i(5779);t.exports=function(t){"use strict";var e,n="",a=(t=t||{}).image,o=s.$escape,h=t.sizes,r=t.widthIncrement,d=t.maxWidth,l=t.quality,c=t.title,p=t.width;return a&&(n+='\n<div\n  class="responsive-image"\n  style="\n    --aspect-ratio: ',n+=o(a.roundedAspectRatio),n+=";\n    ",a.color&&(n+="--bg-color:",n+=o(a.color),n+=";"),n+='\n  "\n> \n  <img class="lazy" data-src="',n+=o(a.url),n+='" data-sizes="',n+=o(h||"100vw"),n+='"\n    data-srcset="',e=i(7230)({image:a,widthIncrement:r,maxWidth:d,quality:l}),n+=e,n+='"\n    data-width="',n+=o(a.dimensions.width),n+='" data-height="',n+=o(a.dimensions.height),n+='"\n    alt="',n+=o(a.alt||c),n+='"\n    decoding="async"\n    ',p&&(n+='width="',n+=o(p),n+='px"'),n+="\n    ",p&&(n+='height="',n+=o(p*a.roundedAspectRatio),n+='px"'),n+='\n  >\n  <noscript><img alt="',n+=o(a.alt||c),n+='" src="',n+=o(a.url),n+='" /></noscript>\n</div>\n'),n+="\n"}},7230:(t,e,i)=>{var s=i(5779);t.exports=function(t){"use strict";var e="",i=(t=t||{}).widthIncrement,n=t.quality,a=t.maxWidthValue,o=t.maxWidth,h=t.image,r=t.iterationIndex,d=t.i,l=s.$escape;i=i||200;e+="\n";n=n||100;e+="\n\n";a=o||h.dimensions.width;if(e+="\n",h.dimensions.width>=o){e+="\n  ";a=o;e+="\n"}else{e+="\n  ";a=h.dimensions.width;e+="\n"}e+="\n\n";r=a/i;e+="\n\n";for(d=1;d<=r;d++)e+="\n",i*d<=a-i/2&&(e+="\n  ",e+=l(h.url),e+="?w=",e+=l(i*d),e+="&fit=max&auto=format&q=",e+=l(n),e+=" ",e+=l(i*d),e+="w,\n"),e+="\n";return e+="\n",e+=l(h.url),e+="?w=",e+=l(a),e+="&fit=max&auto=format&q=",e+=l(n),e+=" ",e+=l(a),e+="w,\n"}},5403:(t,e,i)=>{var s=i(5779);t.exports=function(t){"use strict";t=t||{};var e="",n=s.$each,a=t.data,o=(t.photo,t.key,s.$escape);t.image,t.sizes,t.widthIncrement,t.maxWidth,t.width;return e+='<section class="page-wrapper" id="project">\n  <div class="project__wrapper">\n    ',n(a.photos,(function(t,s){e+='\n      <div class="project__photo" style="z-index:',e+=o(10+a.photos.length-s),e+=';">\n      ';var n,h=t.photo;e+="\n      ",n=i(4249)({image:h,sizes:"50vw",widthIncrement:200,maxWidth:h.dimensions.width,width:"920"}),e+=n,e+="\n      </div>\n    "})),e+="\n  </div>\n</section>\n"}},3052:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});i(8674);var s=i(363),n=i(6748),a=i(1636),o=i(7922),h=i(334),r=i(2188);class d extends s.Z{constructor(t){super(t),this.type=t.type||"default",this.data=t.data?t.data:{},this.promises={data:{resolve:null,reject:null}},this.sequences={}}initComponent(){this.getData().then((()=>{this.initData(),super.initComponent()}))}getData(){return new Promise(((t,e)=>{this.promises.data.resolve=t,this.promises.data.reject=e,this.fetchData()}))}initData(){this.data.meta&&n.Z.dispatch((0,r.US)(this.data.meta)),this.props.data=this.data}fetchData(){if(!this.props.endPoint)return void this.promises.data.resolve();const{oldPage:t,location:e}=n.Z.getState().app,i=(0,o.B)(e);if(t){const t=a.e+this.props.endPoint,e=h.Z.has(i.id)?h.Z.getData(i.id):null;e?Promise.resolve(e)==e?e.then((()=>{this.setData(h.Z.getData(i.id))})):this.setData(e):fetch(t).then((t=>t.json())).then((t=>{this.setData(t),h.Z.set(i.id,t)})).catch((()=>{this.promises.data.reject()}))}else{const{globalData:t}=n.Z.getState().app;t&&t.serverData?(this.setData(t.serverData),h.Z.set(i.id,t.serverData)):this.promises.data.reject()}}setData(t){this.data=t,this.promises.data.resolve()}setupDOM(){this.el.style.opacity=0}onDOMInit(){const{oldPage:t}=n.Z.getState().app;t&&(this.el.classList.add("next-page"),document.getElementById("content").querySelector(".page__container").appendChild(this.el)),super.onDOMInit()}showComponent(){var t=this;setTimeout((async function(){t.el.style.opacity=1,t.onShown()}),0)}hideComponent(){var t=this;setTimeout((async function(){t.el.style.opacity=0,t.onHidden()}),0)}}const l=d},1354:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>c});var s=i(4942),n=(i(6992),i(3948),i(8674),i(3052)),a=i(5403),o=i(6748),h=i(5139),r=i(2188),d=i(9630);class l extends n.Z{constructor(t){super(t),(0,s.Z)(this,"handleClick",(t=>{const{projectActivePhotoIndex:e}=o.Z.getState().app;let i;if("up"!==t){const t=this.mod(e+1,this.data.photos.length);i=this.tops&&this.tops[t]}else{const t=this.mod(e-1,this.data.photos.length);i=this.tops&&this.tops[t]}i&&window.scrollTo(0,i)})),(0,s.Z)(this,"handleKeyDown",(t=>{const e=t.key;"Escape"!==e||this.state.isAnimating||(t.preventDefault(),h.Z.navigate("")),"ArrowDown"!==e&&" "!==e&&"ArrowRight"!==e||this.state.isAnimating||(t.preventDefault(),this.handleClick()),"ArrowUp"!==e&&"ArrowLeft"!==e||this.state.isAnimating||(t.preventDefault(),this.handleClick("up"))})),(0,s.Z)(this,"mod",((t,e)=>(t%e+e)%e)),this.template=a,this.state={firstImageLoaded:!1,timerComplete:!1},this.storeEvents={"layout.window":t=>this.handleWindowUpdate(t),"layout.window.breakpoint":(t,e)=>this.onBreakpointUpdate(t,e)}}initDOM(){this.$items=this.el.querySelectorAll(".project__photo"),this.$itemsImage=this.el.querySelectorAll(".responsive-image"),this.$images=[...this.el.querySelectorAll(".responsive-image img")]}bindEvents(){const{breakpoint:t}=o.Z.getState().layout.window;"smallDesktop"!==t&&(this.raf=window.requestAnimationFrame((()=>this.update())),this.el.addEventListener("click",this.handleClick)),document.addEventListener("keydown",this.handleKeyDown,!1)}unbindEvents(){window.cancelAnimationFrame(this.raf),this.el.removeEventListener("click",this.handleClick),document.removeEventListener("keydown",this.handleKeyDown,!1)}update(){if(this.scrollRanges){const t=this.scrollRanges.findIndex((t=>{const{start:e,end:i}=t;return e<=window.scrollY&&i>=window.scrollY}));t!==o.Z.getState().app.projectActivePhotoIndex&&o.Z.dispatch((0,r.yM)(t))}this.raf=window.requestAnimationFrame((()=>this.update()))}preShow(){this.animSequence=[];const t=document.querySelector(".featuredProject__hoverItem.is-active");if(t){[...t.querySelectorAll(".responsive-image")].splice(0,1).forEach(((t,e)=>{const i=t.getBoundingClientRect(),s=this.$items[e].getBoundingClientRect(),n=i.width/s.width,a=s.x-i.x,o=s.y-i.y,h=i.width/2,r=s.width/2,d=i.height/2,l=s.height/2;this.animSequence.push([this.$items[e],[{transform:`translate3d(${-a-(r-h)}px, ${-o-(l-d)}px, 0px)`},{transform:"translate3d(0px, 0px, 0px)"}],{duration:1200,easing:"cubic-bezier(0.87, 0, 0.13, 1)",fill:"forwards"}]),this.animSequence.push([this.$itemsImage[e],[{transform:`scale(${n},${n})`},{transform:"scale(1,1)"}],{duration:1200,easing:"cubic-bezier(0.87, 0, 0.13, 1)",fill:"forwards"}])}))}}showComponent(){const{oldPage:t}=o.Z.getState().app,{hoveredProjectId:e}=o.Z.getState().app,{breakpoint:i}=o.Z.getState().layout.window;t&&"homepage"===t.type&&null!==e&&"smallDesktop"!==i?setTimeout((()=>{this.handleAnimationCallback("timer")}),300):super.showComponent()}onDOMInit(){super.onDOMInit();const{oldPage:t}=o.Z.getState().app,{hoveredProjectId:e}=o.Z.getState().app,{breakpoint:i}=o.Z.getState().layout.window;"smallDesktop"!==i&&(t&&"homepage"===t.type&&null!==e?(0,d.po)(this.$images[0]).then((()=>{this.handleAnimationCallback("load"),this.$images.slice(1).forEach((t=>{(0,d.po)(t)}))})):this.$images.forEach((t=>{(0,d.po)(t)})))}onShown(){this.handleWindowUpdate({width:window.innerWidth,height:window.innerHeight}),document.documentElement.classList.add("project-shown"),super.onShown()}onHidden(){document.documentElement.classList.remove("project-shown"),super.onHidden()}async handleAnimationCallback(t){if("load"===t?this.setState({firstImageLoaded:!0}):this.setState({timerComplete:!0}),this.state.firstImageLoaded&&this.state.timerComplete){const t=document.querySelector(".featuredProject__hoverItem.is-active .responsive-image");t.style.opacity=0,this.el.style.opacity=1;const e=[],i=[];this.animSequence.forEach((([t,s,n])=>{const a=t.animate(s,n);i.push(a),e.push(a.finished)})),Promise.all(e).then((()=>{t.style.opacity=1,i.forEach((t=>t.cancel())),this.onShown()}))}}handleWindowUpdate(t){var e;const i=this.el.getBoundingClientRect().y,s=[];this.tops=[],null===(e=this.$items)||void 0===e||e.forEach((e=>{const n=e.getBoundingClientRect(),a=n.y+window.scrollY-(i+window.scrollY),o=a-t.height+n.height/2;this.tops.push(a-20),s.push(o)})),this.scrollRanges=s.map(((t,e)=>({start:t,end:s[e+1]||this.el.offsetHeight})))}onBreakpointUpdate(t){"smallDesktop"!==t?this.bindEvents():this.unbindEvents()}dispose(){o.Z.dispatch((0,r.yM)(0)),super.dispose()}}const c=l}}]);